<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- Character encoding set to UTF-8 for wide character support -->
        <meta charset="UTF-8">
        <!-- Makes the page responsive on all devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="A fun and flexible bill splitter app with randomizers, percentages, history export, and dark mode!">
        <meta name="author" content="Rehan Rahim">

        <!-- Title shown in the browser tab -->
        <title>SpliX</title>

        <!-- Bootstrap CSS for easy and responsive styling (loaded from CDN) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Link to custom CSS file for additional styles -->
        <link rel="stylesheet" href="style.css">
    </head>

    <body>

        <!-- Dark Mode Toggle Button (top right) -->
        <div class="text-end p-3">
            <button id="darkToggle" class="btn btn-sm btn-dark" onclick="toggleDarkMode()">ðŸŒ™ Dark Mode</button>
            <div class="shortcut-box" id="shortcutInfo">(Ctrl + D)</div>
        </div>

        <!-- Main container for the content, with top margin for spacing -->
        <div class="container mt-5">

            <!-- App title, centered and with margin at the bottom -->
            <h1 class="text-center mb-1">ðŸ’µ SpliX ðŸ’µ</h1>
            <p class="text-center text-muted mb-4">Bill splitting made simple &amp; entertaining!</p>

            <!-- Bill Input Section -->
            <div class="card p-4 shadow-sm mb-4">
                <h5>Step 1: Enter Total Bill Amount</h5>

                <!-- Combined input and currency selector -->
                <div class="row mb-3">
                    <div class="col-8">
                        <input type="number" id="billAmount" class="form-control" placeholder="Enter total bill amount" inputmode="decimal" step="0.01" pattern="[0-9]*">
                    </div>
                    <div class="col-4">
                        <select id="currency" class="form-select">
                            <option value="$" selected>USD ($)</option>
                            <option value="â‚¹">INR (â‚¹)</option>
                            <option value="â‚¬">EUR (â‚¬)</option>
                        </select>
                    </div>
                </div>

                <!-- Participants Section -->
                <div class="card p-4 shadow-sm mb-4">
                    <h5>Step 2: Add People</h5>

                    <!-- Input and button to add person -->
                    <form id="personForm" class="d-flex mb-3" onsubmit="addPerson(); return false;">
                        <input type="text" id="personName" class="form-control me-2" placeholder="Enter name" aria-label="Enter name" required pattern="[A-Za-z ]+">
                        <button class="btn btn-primary" type="submit">Add</button>
                    </form>


                    <!-- List to show added names -->
                    <ul id="peopleList" class="list-group"></ul>
                </div>


                <!-- Clear All button -->
                <button class="btn btn-danger" onclick="clearAll()">Clear All</button>
            </div>


        </div>

        <!-- Step 3: Choose Split Mode -->
        <div class="card p-4 shadow-sm mb-5">
            <h5>Step 3: Choose Split Mode</h5>

            <!-- Buttons first -->
            <div class="text-center d-flex justify-content-center gap-3 flex-wrap mb-3">
                <button onclick="splitEqually()" class="btn btn-success">Split Equally</button>
                <button onclick="splitByPercentage()" class="btn btn-warning">Split by Percentage</button>
                <button onclick="splitRandomly()" class="btn btn-info">Random % Split</button>
            </div>

            <!-- Two-column layout: left Assign Percentages, right Split Result -->
            <div class="row g-3 align-items-start">
                <div class="col-md-6 col-lg-5">
                    <div class="card p-3">
                        <h6 class="mb-2">Assign Percentages</h6>
                        <ul id="percentList" class="list-group"></ul>
                        <small class="text-muted">Percentages must total 100%.</small>
                    </div>
                </div>
                <div class="col-md-6 col-lg-7">
                    <div id="result" class="card p-3 d-none">
                        <h6 class="mb-2">Split Result</h6>
                        <ul id="resultList" class="list-group"></ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Spin-the-Wheel Section -->
        <div class="card p-4 shadow-sm mb-5">
            <h5>Bonus: Dice Roll, Luck Mode & Spin the Wheel!</h5>

            <!-- Dice Roll Randomizer -->
            <div class="card p-4 shadow-sm mb-4">
                <h5>ðŸŽ² Dice Roll - Who Pays the Bill?</h5>
                <p class="text-muted">Each person picks number(s) 1-6. Choose an option, then roll the dice.</p>
                <p class="text-muted">One selected person pays the whole bill.</p>

                <!-- Dice 3D cube -->
                <div class="d-flex justify-content-center my-3">
                    <div id="dice" class="dice">
                        <div id="diceCube" class="cube">
                            <div class="face face1">1</div>
                            <div class="face face2">2</div>
                            <div class="face face3">3</div>
                            <div class="face face4">4</div>
                            <div class="face face5">5</div>
                            <div class="face face6">6</div>
                        </div>
                    </div>
                </div>

                <!-- Mode selector -->
                <div class="d-flex flex-column align-items-center mb-2">
                    <div class="form-check mb-1">
                        <input class="form-check-input" type="radio" name="diceMode" id="diceCoverAll" value="coverAll" checked>
                        <label class="form-check-label" for="diceCoverAll">Option A: Include All 1-6 (Some May Pick Multiple)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="diceMode" id="diceChosenOnly" value="chosenOnly">
                        <label class="form-check-label" for="diceChosenOnly">Option B: Roll Only Chosen Numbers</label>
                    </div>
                </div>

                <!-- Per-person number picks -->
                <div id="dicePicks" class="mb-2"></div>

                <div class="text-center">
                    <button class="btn btn-danger" onclick="rollDiceAnimated()">Roll Dice</button>
                </div>
                <div id="diceResult" class="mt-3 text-center fw-bold fs-5 text-primary"></div>
            </div>

            <!-- Luck Mode -->
            <div class="card p-4 shadow-sm mb-4">
                <h5>ðŸ¤ž Luck Mode</h5>
                <p class="text-muted">One lucky person pays nothing!</p>
                <p class="text-muted">The rest split the bill equally.</p>
                <div class="text-center">
                    <button class="btn btn-info" onclick="activateLuckMode()">Try Your Luck</button>
                </div>
                <div id="luckResult" class="mt-3 text-center fw-bold fs-5 text-success"></div>
            </div>

            <!-- Spin the Wheel Card -->
            <div class="card p-4 shadow-sm mb-4">
                <!-- Heading in the top-left corner -->
                <div class="text-start">
                    <h5 class="mb-1">ðŸŽ¡ Spin the Wheel</h5>
                    <p class="text-muted mb-1">The selected person pays 50% of their original share.</p>
                    <p class="text-muted mb-1">The remaining amount is split equally among others.</p>
                </div>

                <div class="row align-items-center">
                    <!-- Breakdown at middle-left of the wheel -->
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card d-inline-block" style="min-width: 280px; max-width: 420px;">
                            <ul id="wheelBreakdown" class="list-group list-group-flush mb-0"></ul>
                        </div>
                    </div>

                    <!-- Wheel on the right -->
                    <div class="col-md-8">
                        <!-- Arrow pointer above the wheel -->
                        <div class="position-relative d-flex justify-content-center mb-3" style="height: 20px;">
                            <div style="
                                        width: 0;
                                        height: 0;
                                        border-left: 15px solid transparent;
                                        border-right: 15px solid transparent;
                                        border-top: 20px solid red;
                                        position: absolute;
                                        top: 0;
                                        z-index: 10;
                                       "></div>
                        </div>

                        <!-- Canvas where the wheel will be drawn -->
                        <canvas id="wheelCanvas" width="300" height="300" class="d-block mx-auto border border-secondary rounded-circle"></canvas>

                        <!-- Spin Button -->
                        <div class="text-center mt-3">
                            <button class="btn btn-danger" onclick="spinWheel()">Spin</button>
                        </div>

                        <!-- Winner result under the wheel -->
                        <p id="wheelResult" class="text-center mt-3 fw-bold text-primary"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap JavaScript and Popper.js for interactive components -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <!-- Link to custom JavaScript file for app functionality -->
        <script src="script.js"></script>
    </body>

</html>
